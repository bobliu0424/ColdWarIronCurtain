    Defense_buff_chi_shanghai = { #CHI holds Shanghai and PRC loses Shanghai
                

    }

    Conquered_buff_PRC_shanghai = { #PRC takes Shanghai and CHI loses Shanghai

                PRC = {
			        swap_ideas = {
                      remove_idea = PRC_peoples_army
                      add_idea = PRC_peoples_army5
                    }
			    }

                CHI = {
                    swap_ideas = {
                         remove_idea = CHI_disorganized_military
                         add_idea = CHI_disorganized_military5
                    }
                }

    }	

    CHI_new_major_defense = { #CHI defends 
	             
        if = {
          limit = {
            has_idea = CHI_disorganized_military
          }
          swap_ideas = {
            remove_idea = CHI_disorganized_military
            add_idea = CHI_disorganized_military2
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military9
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military9
              add_idea = CHI_disorganized_military3
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military2
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military2
              add_idea = CHI_disorganized_military4
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military3
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military3
              add_idea = CHI_disorganized_military4
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military7
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military7
              add_idea = CHI_disorganized_military5
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military6
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military6
              add_idea = CHI_disorganized_military8
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military5
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military5
              add_idea = CHI_disorganized_military4
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military8
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military8
              add_idea = CHI_disorganized_military9
            }
          }
      }
    }	

    CHI_new_minor_defense = { #CHI defends 
	             
        if = {
          limit = {
            has_idea = CHI_disorganized_military
          }
          swap_ideas = {
            remove_idea = CHI_disorganized_military
            add_idea = CHI_disorganized_military9
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military9
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military9
              add_idea = CHI_disorganized_military2
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military2
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military2
              add_idea = CHI_disorganized_military3
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military3
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military3
              add_idea = CHI_disorganized_military4
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military7
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military7
              add_idea = CHI_disorganized_military6
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military6
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military6
              add_idea = CHI_disorganized_military5
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military5
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military5
              add_idea = CHI_disorganized_military8
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military8
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military8
              add_idea = CHI_disorganized_military
            }
          }
      }
    }
	
	PRC_new_no_takeover = { #PRC doesn't take over 
	           
            PRC = {			   
                if = {
                  limit = { has_idea = PRC_peoples_army5 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army5
                       add_idea = PRC_peoples_army8
                    }
                }
            }
            PRC = {			   
                if = {
                  limit = { has_idea = PRC_peoples_army5 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army
                      add_idea = PRC_peoples_army2
                    }
                }
            }
			
			PRC = {	
				if = {
                  limit = { has_idea = PRC_peoples_army2 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army2
                       add_idea = PRC_peoples_army3
                    }
                }
			}	
			
			PRC = {	
				if = {
                  limit = { has_idea = PRC_peoples_army }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army
                       add_idea = PRC_peoples_army9
                    }
                }
			}

      PRC = {			   
                if = {
                  limit = { has_idea = PRC_peoples_army5 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army5
                       add_idea = PRC_peoples_army6
                    }
                }
			}
			
			PRC = {	
				if = {
                  limit = { has_idea = PRC_peoples_army2 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army2
                       add_idea = PRC_peoples_army9
                    }
                }
			}

            PRC = {	
				if = {
                  limit = { has_idea = PRC_peoples_army }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army
                       add_idea = PRC_peoples_army8
                    }
                }
			}			
      PRC = {		 
                if = {
                  limit = { has_idea = PRC_peoples_army6 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army6
                       add_idea = PRC_peoples_army5
                    }
                }
			}

            PRC = {			
				
				if = {
                  limit = { has_idea = PRC_peoples_army9 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army9
                       add_idea = PRC_peoples_army2
                    }
                }
			}

            PRC = {			
				
				if = {
                  limit = { has_idea = PRC_peoples_army8 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army8
                       add_idea = PRC_peoples_army
                    }
                }
			}
       
            PRC = {
			
				if = {
                  limit = { has_idea = PRC_peoples_army3 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army3
                       add_idea = PRC_peoples_army4
                    }
                }
			}

            PRC = {	
				if = {
                  limit = { has_idea = PRC_peoples_army }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army
                       add_idea = PRC_peoples_army9
                    }
                }
			}			


    }
	
	CHI_new_minor_loss = { #CHI loses 
	             
        if = {
          limit = {
            has_idea = CHI_disorganized_military
          }
          swap_ideas = {
            remove_idea = CHI_disorganized_military
            add_idea = CHI_disorganized_military8
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military9
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military9
              add_idea = CHI_disorganized_military
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military2
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military2
              add_idea = CHI_disorganized_military9
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military3
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military3
              add_idea = CHI_disorganized_military2
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military4
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military4
              add_idea = CHI_disorganized_military3
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military6
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military6
              add_idea = CHI_disorganized_military7
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military5
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military5
              add_idea = CHI_disorganized_military6
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military8
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military8
              add_idea = CHI_disorganized_military5
            }
          }
        }
  }

  CHI_new_major_loss = { #CHI loses 
	             
        if = {
          limit = {
            has_idea = CHI_disorganized_military
          }
          swap_ideas = {
            remove_idea = CHI_disorganized_military
            add_idea = CHI_disorganized_military5
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military9
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military9
              add_idea = CHI_disorganized_military8
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military2
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military2
              add_idea = CHI_disorganized_military
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military3
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military3
              add_idea = CHI_disorganized_military9
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military4
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military4
              add_idea = CHI_disorganized_military2
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military6
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military6
              add_idea = CHI_disorganized_military7
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military5
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military5
              add_idea = CHI_disorganized_military7
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military8
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military8
              add_idea = CHI_disorganized_military6
            }
          }
        }
  }
	
	PRC_new_takeover = { #PRC takes over 
	             
		PRC = {	 
                if = {
                  limit = { has_idea = PRC_peoples_army6 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army6
                       add_idea = PRC_peoples_army7
                    }
                }
		}

        PRC = {		
				
				if = {
                  limit = { has_idea = PRC_peoples_army9 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army9
                       add_idea = PRC_peoples_army
                    }
                }
		}

        PRC = {		
				if = {
                  limit = { has_idea = PRC_peoples_army8 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army8
                       add_idea = PRC_peoples_army5
                    }
                }
		}

        PRC = {		
				if = {
                  limit = { has_idea = PRC_peoples_army3 }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army3
                       add_idea = PRC_peoples_army2
                    }
                }
		}

        PRC = {	
				if = {
                  limit = { has_idea = PRC_peoples_army }
                    swap_ideas = {
                       remove_idea = PRC_peoples_army
                       add_idea = PRC_peoples_army8
                    }
                }
			}		

    }

    minor_CCW_KMT_defense = {
        if = {
          limit = {
            has_idea = CHI_disorganized_military_old
          }
          swap_ideas = {
            remove_idea = CHI_disorganized_military_old
            add_idea = CHI_disorganized_military_old2
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old2
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military_old2
              add_idea = CHI_disorganized_military_old3
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old3
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military_old3
              add_idea = CHI_disorganized_military_old4
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old4
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military_old4
              add_idea = CHI_disorganized_military_old5
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old5
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military_old5
              add_idea = CHI_disorganized_military_old6
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old6
            }
            remove_ideas = CHI_disorganized_military_old6
          }
        }
    }

    major_CCW_KMT_defense = {
        if = {
          limit = {
            has_idea = CHI_disorganized_military_old
          }
          swap_ideas = {
            remove_idea = CHI_disorganized_military_old
            add_idea = CHI_disorganized_military_old3
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old2
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military_old2
              add_idea = CHI_disorganized_military_old4
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old3
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military_old3
              add_idea = CHI_disorganized_military_old5
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old4
            }
            swap_ideas = {
              remove_idea = CHI_disorganized_military_old4
              add_idea = CHI_disorganized_military_old6
            }
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old5
            }
            remove_ideas = CHI_disorganized_military_old5 
          }
          else_if = {
            limit = {
              has_idea = CHI_disorganized_military_old6
            }
            remove_ideas = CHI_disorganized_military_old6
          }
        }
    }
	
	###Taiwan 50s Inflation Reduction###
	
	lower_inflation = { 
	
			If = {
				limit = {
					has_idea = CHI_Inflation_small
				}
				swap_ideas = {
					remove_idea = CHI_Inflation_small
					add_idea = CHI_Inflation_small2
				}
			}
			else_if = {
				limit = {
					has_idea = CHI_Inflation_small2
				}
					swap_ideas = {
						remove_idea = CHI_Inflation_small2
						add_idea = CHI_Inflation_small3
					}
			}
			else_if = {
				limit = {
					has_idea = CHI_Inflation_small3
				}
						remove_ideas = CHI_Inflation_small3					
			}

    }
	
	###ROC 1950s Mainland Dynamic Modifiers Increase/Decrease###
	
	decrease_economic_penalty = {
	
		add_to_variable = {
			KMT_LOCAL_RESSOURCES_EFFICENCY_VAR = 0.013
		}
		add_to_variable = {
			KMT_CONSUMER_GOODS_VAR = -0.02
		}
		add_to_variable = {
			KMT_AFTERMATH_CIVIL_WAR_VAR = 0.03
		}

	}

  KMT_decrease_illiteracy_rate = {
    if = {
      limit = {
        check_variable = { KMT_RESEARCH_SPEED_VAR > -0.05 }
      }
      remove_dynamic_modifier = { modifier = kmt_massed_illiteracy_modifier }
      else = {
        add_to_variable = {
          KMT_RESEARCH_SPEED_VAR = 0.05
		    }
      }
    }
  }

  KMT_massive_decrease_illiteracy_rate = {
    add_to_variable = {
			KMT_RESEARCH_SPEED_VAR = 0.1
		}
  }
	
	
	###Taiwan 50s Dynamic Modifiers Increase/Decrease###
	
	increase_influence_normal = { 
	
		add_to_variable = {
			kmt_50s_influence_taiwan_var = 0.005
		}

    }
	
	increase_influence_greatly = { 
	
		add_to_variable = {
			kmt_50s_influence_taiwan_var = 0.03
		}

    }
	
	decrease_influence_normal = { 
	
		add_to_variable = {
			kmt_50s_influence_taiwan_var = -0.03
		}

    }
	
	decrease_influence_greatly = { 
	
		add_to_variable = {
			kmt_50s_influence_taiwan_var = -0.06
		}

    }
	
	increase_unity_normal = { 
	
		add_to_variable = {
			kmt_50s_unity_taiwan_surrender_var = 0.06
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_drift_defence_var = 0.08
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_research_var = 0.06
		}
			
    }
	
	increase_unity_greatly = { 
	
		add_to_variable = {
			kmt_50s_unity_taiwan_surrender_var = 0.09
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_drift_defence_var = 0.1
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_research_var = 0.08
		}

    }
	
	decrease_unity_normal = { 
	
		add_to_variable = {
			kmt_50s_unity_taiwan_surrender_var = -0.04
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_drift_defence_var = -0.05
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_research_var = -0.04
		}

    }
	
	decrease_unity_greatly = { 
	
		add_to_variable = {
			kmt_50s_unity_taiwan_surrender_var = -0.07
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_drift_defence_var = -0.08
		}
		add_to_variable = {
			kmt_50s_unity_taiwan_research_var = -0.07
		}


    }
	
	increase_unrest_normal = { 
	
		add_to_variable = {
			kmt_50s_native_taiwan_var = -0.02
		}
		add_to_variable = {
			kmt_50s_native_taiwan_recruitablepop_var = -0.03
		}
		

    }
	
	increase_unrest_greatly = { 
	
		add_to_variable = {
			kmt_50s_native_taiwan_var = -0.03
		}
		add_to_variable = {
			kmt_50s_native_taiwan_recruitablepop_var = -0.05
		}

    }
	
	decrease_unrest_normal = { 
	
		add_to_variable = {
			kmt_50s_native_taiwan_var = 0.04
		}
		add_to_variable = {
			kmt_50s_native_taiwan_recruitablepop_var = 0.06
		}

    }
	
	decrease_unrest_greatly = { 
		
		add_to_variable = {
			kmt_50s_native_taiwan_var = 0.06
		}
		add_to_variable = {
			kmt_50s_native_taiwan_recruitablepop_var = 0.10
		}


    }
	
	increase_us_influence = {
		CHI = {
					set_temp_variable = { percent_change = 5 }
					set_temp_variable = { tag_index = USA }
					set_temp_variable = { influence_target = CHI }
					change_influence_percentage = yes     
		}
	}
 
	decrease_us_influence = {
		CHI = {
					set_temp_variable = { percent_change = -5 }
					set_temp_variable = { tag_index = USA }
					set_temp_variable = { influence_target = CHI }
					change_influence_percentage = yes     
		}
	}
		

	ProgressBar_var_unrest_calculate = {

   
        set_variable = { ProgressBar_Unrest_var = kmt_50s_native_taiwan_var }
		multiply_variable =  {var = "ProgressBar_Unrest_var"value = 100}
        add_to_variable = { var = "ProgressBar_Unrest_var" value = 30 }
		divide_variable = { var = "ProgressBar_Unrest_var" value = 60 }
		multiply_variable =  {var = "ProgressBar_Unrest_var"value = 100}
		round_variable = ProgressBar_Unrest_var
	}
	
	ProgressBar_var_unity_calculate = {

   
        set_variable = { ProgressBar_Unity_var = kmt_50s_unity_taiwan_surrender_var }
		multiply_variable =  {var = "ProgressBar_Unity_var"value = 100}
        add_to_variable = { var = "ProgressBar_Unity_var" value = 20 }
		divide_variable = { var = "ProgressBar_Unity_var" value = 40 }
		multiply_variable =  {var = "ProgressBar_Unity_var"value = 100}
		round_variable = ProgressBar_Unity_var
	}
	
	ProgressBar_var_influence_calculate = {

   
        set_variable = { ProgressBar_var_influence = kmt_50s_influence_taiwan_var }
		multiply_variable =  {var = "ProgressBar_var_influence"value = 100}
        add_to_variable = { var = "ProgressBar_var_influence" value = 20 }
		divide_variable = { var = "ProgressBar_var_influence" value = 40 }
		multiply_variable =  {var = "ProgressBar_var_influence"value = 100}
		round_variable = ProgressBar_var_influence
	}
 
  